<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>计算机网络体系结构 - 九九</title><meta name="Description" content=""><meta property="og:title" content="计算机网络体系结构" />
<meta property="og:description" content="计算机网络是一种非常复杂的系统。实践证明，按照层次结构建立的系统具有较高的稳定性和可管理性。为此，计算机网络也按照层次结构进行研究和建造。 这" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://dingjingmaster.github.io/2022/10/0004-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/" /><meta property="og:image" content="https://dingjingmaster.github.io/img/logo.jpg"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-10-02T21:59:58+08:00" />
<meta property="article:modified_time" content="2022-10-02T21:59:58+08:00" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://dingjingmaster.github.io/img/logo.jpg"/>

<meta name="twitter:title" content="计算机网络体系结构"/>
<meta name="twitter:description" content="计算机网络是一种非常复杂的系统。实践证明，按照层次结构建立的系统具有较高的稳定性和可管理性。为此，计算机网络也按照层次结构进行研究和建造。 这"/>
<meta name="application-name" content="九九">
<meta name="apple-mobile-web-app-title" content="九九"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://dingjingmaster.github.io/2022/10/0004-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/" /><link rel="prev" href="https://dingjingmaster.github.io/2022/10/0003-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/" /><link rel="next" href="https://dingjingmaster.github.io/2022/11/0012-%E9%98%B2%E6%AD%A2%E7%A8%8B%E5%BA%8F%E8%A2%ABhook%E7%9A%84%E6%96%B9%E6%B3%95/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "计算机网络体系结构",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/dingjingmaster.github.io\/2022\/10\/0004-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84\/"
        },"image": ["https:\/\/dingjingmaster.github.io\/img\/logo.jpg"],"genre": "posts","keywords": "system, network, 网络, 网络原理","wordcount":  11677 ,
        "url": "https:\/\/dingjingmaster.github.io\/2022\/10\/0004-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84\/","datePublished": "2022-10-02T21:59:58+08:00","dateModified": "2022-10-02T21:59:58+08:00","publisher": {
            "@type": "Organization",
            "name": "九九","logo": "https:\/\/dingjingmaster.github.io\/img\/logo.jpg"},"author": {
                "@type": "Person",
                "name": "ding jing"
            },"description": ""
    }
    </script></head>
    <body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="九九"><span class="header-title-pre"> </span>九九</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> 所有文章 </a><a class="menu-item" href="/tags/"> 标签 </a><a class="menu-item" href="/categories/"> 分类 </a><a class="menu-item" href="/timeline/"> 时间轴 </a><a class="menu-item" href="https://github.com/dingjingmaster" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i>  </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="九九"><span class="header-title-pre"> </span>九九</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        取消
                    </a>
                </div><a class="menu-item" href="/posts/" title="">所有文章</a><a class="menu-item" href="/tags/" title="">标签</a><a class="menu-item" href="/categories/" title="">分类</a><a class="menu-item" href="/timeline/" title="">时间轴</a><a class="menu-item" href="https://github.com/dingjingmaster" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i></a><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">目录</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">计算机网络体系结构</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>ding jing</a></span>&nbsp;<span class="post-category">收录于 <a href="/categories/system/"><i class="far fa-folder fa-fw"></i>system</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2022-10-02">2022-10-02</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 11677 字&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 24 分钟&nbsp;<span id="/2022/10/0004-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/" class="leancloud_visitors" data-flag-title="计算机网络体系结构">
                        <i class="far fa-eye fa-fw"></i>&nbsp;<span class=leancloud-visitors-count></span>&nbsp;次阅读
                    </span>&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>目录</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#isoosi参考模型">ISO/OSI参考模型</a>
      <ul>
        <li><a href="#关于网层次结构的基本概念">关于网层次结构的基本概念</a>
          <ul>
            <li><a href="#分层原则">分层原则</a></li>
            <li><a href="#服务与接口">服务与接口</a>
              <ul>
                <li><a href="#服务与协议">服务与协议</a></li>
                <li><a href="#接口">接口</a></li>
                <li><a href="#服务原语">服务原语</a>
                  <ul>
                    <li><a href="#原语的概念">原语的概念</a></li>
                    <li><a href="#有证实服务和无证实服务">有证实服务和无证实服务</a></li>
                    <li><a href="#原语的参数">原语的参数</a></li>
                  </ul>
                </li>
                <li><a href="#协议与服务的关系">协议与服务的关系</a></li>
              </ul>
            </li>
            <li><a href="#各层设计中的流量控制">各层设计中的流量控制</a>
              <ul>
                <li><a href="#拥塞与死锁">拥塞与死锁</a></li>
                <li><a href="#流量控制的基本原理">流量控制的基本原理</a></li>
                <li><a href="#流量控制的级别">流量控制的级别</a></li>
                <li><a href="#用户资源需求限制策略">用户资源需求限制策略</a>
                  <ul>
                    <li><a href="#等待传输法">等待传输法</a></li>
                    <li><a href="#预约缓冲区法">预约缓冲区法</a></li>
                    <li><a href="#数据单元丢弃法">数据单元丢弃法</a></li>
                    <li><a href="#许可证法">许可证法</a></li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
        </li>
        <li><a href="#isoosi参看模型结构">ISO/OSI参看模型结构</a>
          <ul>
            <li><a href="#osi的底层">OSI的底层</a>
              <ul>
                <li><a href="#物理层">物理层</a></li>
                <li><a href="#数据链路层">数据链路层</a></li>
                <li><a href="#网络层">网络层</a></li>
              </ul>
            </li>
            <li><a href="#osi的高层">OSI的高层</a>
              <ul>
                <li><a href="#会话层">会话层</a></li>
                <li><a href="#表示层">表示层</a></li>
                <li><a href="#应用层">应用层</a></li>
              </ul>
            </li>
          </ul>
        </li>
        <li><a href="#传输层">传输层</a>
          <ul>
            <li><a href="#传输层的功能">传输层的功能</a></li>
            <li><a href="#传输模型">传输模型</a></li>
            <li><a href="#传输层的基本开发思想">传输层的基本开发思想</a></li>
            <li><a href="#传输层协议类型与网络层服务质量的关系">传输层协议类型与网络层服务质量的关系</a></li>
            <li><a href="#传输服务过程">传输服务过程</a>
              <ul>
                <li><a href="#建立连接">建立连接</a>
                  <ul>
                    <li><a href="#与远端固定传输地址的连接">与远端固定传输地址的连接</a></li>
                    <li><a href="#与非固定传输地址的连接">与非固定传输地址的连接</a></li>
                    <li><a href="#tsap地址和nsap地址的结构">TSAP地址和NSAP地址的结构</a></li>
                  </ul>
                </li>
                <li><a href="#数据传输">数据传输</a>
                  <ul>
                    <li><a href="#数据等装">数据等装</a></li>
                    <li><a href="#拼接和分割">拼接和分割</a></li>
                    <li><a href="#多路复用和分流">多路复用和分流</a></li>
                    <li><a href="#流量控制和缓冲管理">流量控制和缓冲管理</a></li>
                  </ul>
                </li>
                <li><a href="#释放连接">释放连接</a></li>
              </ul>
            </li>
            <li><a href="#传输服务原语">传输服务原语</a>
              <ul>
                <li><a href="#传输服务原语的参数">传输服务原语的参数</a></li>
                <li><a href="#传输服务原语的类型">传输服务原语的类型</a></li>
                <li><a href="#面向连接的传输服务原语">面向连接的传输服务原语</a>
                  <ul>
                    <li><a href="#连接服务原语">连接服务原语</a></li>
                    <li><a href="#连接释放服务原语">连接释放服务原语</a></li>
                    <li><a href="#数据正常拴束服务原语">数据正常拴束服务原语</a></li>
                    <li><a href="#数据加速传输服务原语">数据加速传输服务原语</a></li>
                  </ul>
                </li>
                <li><a href="#无连接的传输服务原语">无连接的传输服务原语</a></li>
              </ul>
            </li>
            <li><a href="#传输服务原语使用的时序">传输服务原语使用的时序</a></li>
          </ul>
        </li>
        <li><a href="#osirm各层中的数据流动">OSI/RM各层中的数据流动</a></li>
      </ul>
    </li>
    <li><a href="#ieee-802模型与局域网">IEEE 802模型与局域网</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p>计算机网络是一种非常复杂的系统。实践证明，按照层次结构建立的系统具有较高的稳定性和可管理性。为此，计算机网络也按照层次结构进行研究和建造。
<br/></p>
<p>这一篇介绍下面几个典型的计算机网络体系结构和相应的网络：</p>
<ul>
<li><a href="/2022/10/0004-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/#isoosi%E5%8F%82%E8%80%83%E6%A8%A1%E5%9E%8B" rel="">ISO/OSI参考模型</a></li>
<li>IEEE 802模型与局域网</li>
<li>Internet 与 Tcp/Ip 体系结构</li>
<li>ATM 网络</li>
</ul>
<h2 id="isoosi参考模型">ISO/OSI参考模型</h2>
<h3 id="关于网层次结构的基本概念">关于网层次结构的基本概念</h3>
<h4 id="分层原则">分层原则</h4>
<p>在层次结构的计算机网络系统中，每一层都具有相对独立的通信功能。<br/></p>
<p>各层间相对独立的通信就好像国家之间的往来，分为元首级的通信、部长级的通信、工作人员级的通信，他们各以不同方式进行不同内容的通信；同一级的通信都是对等的，并且都是在各自的下一级的通信支持下进行的。<br/></p>
<p>基于不同的现实和考虑原则，计算机网络可以有不同的分层方法。但是，一 般说来有一些原则基本上是共同的，如：</p>
<ul>
<li>每层的功能应当明确、各层相对独立，使得当某层的方法变更时，只要 保持接口关系不变，不会影响其他层的结构和方法</li>
<li>各层功能的确定应当有助于网络协议国际标准的制定</li>
<li>层间接口要清晰，尽量减少跨越接口的信息量</li>
<li>层数适当，不可太少，只要增加一个不同等级的抽象，就应当为网络增加相应的层次；也不可太多，否则使网络结构过于复杂</li>
</ul>
<h4 id="服务与接口">服务与接口</h4>
<p>用于同层间通信的协议称为同层协议，并且每一层间通信的协议都是在下一层间通信的协议提供的服务基础上进行工作的。因此，协议和服务是两个不同的概念：协议是“水平的”，是控制对等实体之间通信的规则；服务是“垂直的”， 是下层通过接口向上层提供的支持。</p>
<h5 id="服务与协议">服务与协议</h5>
<p>与前述国家间的交往相似，在对等层间形成虚拟通信。在通信过程中，第 （Ｎ）层向第（Ｎ＋１）层提供服务，而第（Ｎ）层的服务除了要使用（Ｎ）层的功能外，还需要第（Ｎ－１）层以下服务的支持。这里，将第（Ｎ）层对第 （Ｎ＋１）层提供服务称为（Ｎ）服务，显然，（Ｎ）服务是（Ｎ）层及其以下各层服务的 综合。对于第（Ｎ＋１）层来说，只关心（Ｎ）服务，而不必关心（Ｎ－１）服务。
<br/></p>
<p>对等层之间的虚拟通信是通过执行（Ｎ）功能实现的。这时要使用一组规则 （语义）和格式（语法）。这组规则（语义）和格式（语法）称为（Ｎ）协议。</p>
<h5 id="接口">接口</h5>
<p>由前面的讨论可知，上、下层间通过接口交换信息。下图表示了层间接口中的活动。</p>
<div align=center><img src='/pic/system/sys-45.png'/></div>
<center>层间接口中的活动</center>
<p>可以看出，两个相邻层间的信息交换，实际上是由两层间的实体通过服务访问点相互作用的。这里，（Ｎ）实体是Ｎ层中一个活动的元素，可以是软实体（如一个进程），也可以是硬实体（如智能输入输出芯片）。
<br/></p>
<p>接口以一个或多个服务访问点（ＳＡＰ，ＳｅｒｖｉｃｅＡｃｃｅｓｓＰｏｉｎｔ）的形式存在，并通 过访问服务点来实现其功能。（Ｎ）ＳＡＰ位于 Ｎ层和Ｎ＋１层的逻辑交界面上，是 （Ｎ）实体向（Ｎ＋１）实体提供服务的地方，或者说是（Ｎ＋１）实体请求 Ｎ 层服务 ———（Ｎ）服务的地方。每个ＳＡＰ有一个惟一的标识标明它的地址，如在物理层 的ＳＡＰ地址可以是异步通信口的地址。
<br/></p>
<p>ＯＳＩ模型是面向连接的。两个（Ｎ）实体利用一种协议并通过（Ｎ－１）连接实现通信。但是，一个（Ｎ）ＳＡＰ一次只能连接一个（Ｎ）实体和一个（Ｎ＋１）实体，而 一个（Ｎ）实体可以同时通过多个（Ｎ）服务连接一个或多个（Ｎ＋１）实体。</p>
<h5 id="服务原语">服务原语</h5>
<h6 id="原语的概念">原语的概念</h6>
<p>服务在形式上由一组原语（Ｐｒｉｍｉｔｉｖｅ）描述。原语规定了应完成的功能，并用 于传送数据以及控制信息，它们供用户和其他实体访问某服务时调用。它们通 知服务提供者采取某些行动或报告某个对等实体的活动。
<br/></p>
<p>（Ｎ）服务原语可以由（Ｎ）实体向（Ｎ＋１）实体发送，也可以由（Ｎ＋１）实体向 （Ｎ）实体发送。ＩＳＯ／ＯＳＩ定义了下表所示的４种类型的服务原语。</p>
<div align=center><img src='/pic/system/sys-46.png'/></div>
<center>ISO/OSI定义的4中类型的服务原语</center>
<p>大部分原语都带有参数。例如一个运输连接请求原语可以写为:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">T_CONNECT.request(被叫地址，主叫地址，…)
</span></span></code></pre></td></tr></table>
</div>
</div><p>这里，Ｔ ＣＯＮＮＥＣＴ是原语名称，ｒｅｑｕｅｓｔ是原语类型，中间用圆点分隔，“被 叫地址”和“主叫地址”是原语参数。</p>
<h6 id="有证实服务和无证实服务">有证实服务和无证实服务</h6>
<p>服务有有证实（Ｃｏｎｆｉｒｍｅｄ）和无证实（Ｕｎｃｏｎｆｉｒｍｅｄ）之分。有证实服务包括请 求、指示、响应和证实４个原语，无证实服务只包括请求、指示２个原语。下图以张给李打电话通知开会为例，说明有证实服务和无证实服务的交互过程。</p>
<div align=center><img src='/pic/system/sys-47.png'/></div>
<center>有证实服务和无证实服务的交互过程</center>
<blockquote>
<p>这里，ＣＯＮＮＥＣＴ和 ＤＡＴＡ过程是有证实服务，ＤＩＳＣＯＮＮＥＣＴ是无证实服务</p>
</blockquote>
<h6 id="原语的参数">原语的参数</h6>
<p>大多数原语都有参数。例如：连接请求的参数可能要指明是与哪一台计算 机连接，需要的服务类别，以及在该连接上使用的最大报文长度；连接指示原语 的参数可能包括呼叫者标识，需要的服务类型，以及建议的最大报文长度等。在 典型情形下，当接收到一个服务原语时，该层的协议实体读原语中的参数，并把 它们与附加的协议控制信息相结合形成该层的ＰＤＵ，所产生的ＰＤＵ再放到带有 附加参数的服务原语的用户段中，以便传给相邻的下层。</p>
<h5 id="协议与服务的关系">协议与服务的关系</h5>
<p>服务与协议关系非常密切，但却是完全不同的概念，然而又却容易被混淆。 服务定义了相邻两层之间的接口关系，上层是服务的用户，下层是服务的提 供者，并用一组原语描述服务内容———下层能够为它的上层给予的支持。 协议是同层实体之间数据交换的规则。实体利用协议来实现它们的服务的 定义。在某一层上，只要不改变提供给上层的服务，实体可以使用不同的协议。这 样，就把服务同协议完全分离开来。ＯＳＩ的一大贡献也就是实现了服务同协议 的分离。</p>
<h4 id="各层设计中的流量控制">各层设计中的流量控制</h4>
<p>之前介绍了用滑动窗口协议实现链路上数据流量控制的方法。实际 上，不仅在数据链路层，在网络层和运输层都要进行流量控制，如路由器也有流 量控制的功能。这一小节对流量控制做一些较系统的分析，以便使读者在不同 层次上了解流量控制的相同点和不同点。</p>
<h5 id="拥塞与死锁">拥塞与死锁</h5>
<p>在公路上，车流量超过一定限度，大家的速度就不得不减慢；再超过一定的 限度，就会出现谁也走不动的现象。计算机网络也是如此，无论是计算机装置还 是通信设备，对数据的处理能力总是有限的。当网上传输的数据量增加到一定 程度时，网络的吞吐量下降，这种现象称为“拥塞”（Ｃｏｎｇｅｓｔｉｏｎ）。传输数据量急剧 增加时，丢弃的数据帧不断增加，从而引起更多的重发；重发数据所占用的缓冲 区得不到释放，又引起更多的数据帧丢失；这种连锁反应将很快波及全网，使通 信无法进行，网络处于“死锁”（Ｄｅａｄｌｏｃｋ）状态，陷于瘫痪。下图表明了网络系 统吞吐量与输入负载的关系。</p>
<div align=center><img src='/pic/system/sys-48.png'/></div>
<center>网络系统吞吐量与输入负载的关系</center>
<h5 id="流量控制的基本原理">流量控制的基本原理</h5>
<p>防止拥塞和死锁的办法是制定网上交通规则，进行流量控制。从原理上说， 拥塞和死锁是网上可用资源不能满足各用户资源需求造成的，即：
$$\sum 用户资源需求≥可用资源$$
由此，可以得到进行流量控制的基本策略：</p>
<ul>
<li>增加用户可用资源</li>
<li>限制用户资源需求</li>
</ul>
<h5 id="流量控制的级别">流量控制的级别</h5>
<ul>
<li>从网络的组成环节上看，涉及相邻节点间（段级）的流量控制、节点 间（入口出口级）的流量控制、主机与节点间（进网级）的流量控制和主机间（传输 级）的流量控制</li>
<li>从网络的体系结构上看，涉及到物理层、链路层、网络层和传输 层
<br/></li>
</ul>
<p>这二者之间具有以下几点联系：</p>
<ul>
<li>物理层提供了系统最基本的可用资源</li>
<li>段级流量控制在链路层实现</li>
<li>入口出口级的流量控制在网络层实现</li>
<li>进网级的流量控制在网络层和链路层实现</li>
<li>传输级的流量控制在传输层实现
<br/></li>
</ul>
<p>其中，物理层流控的主要目的是提供网络的基本可用资源，基本策略有：</p>
<ul>
<li>合理选择路径，均衡网上负荷</li>
<li>增加通道带宽，增加信息速率</li>
<li>增加缓冲区，等等
<br/></li>
</ul>
<p>其他层的流控策略主要是限制用户资源需求</p>
<div align=center><img src='/pic/system/sys-49.png'/></div>
<center>流量控制的级别</center>
<h5 id="用户资源需求限制策略">用户资源需求限制策略</h5>
<p>下面介绍几种通过限制用户资源需求来控制流量的策略</p>
<h6 id="等待传输法">等待传输法</h6>
<p>当接收节点的缓冲区将被占满、死锁来临之前，向发送节点发送暂停发送信 息；当危险解除后，再通知发送节点恢复发送。</p>
<h6 id="预约缓冲区法">预约缓冲区法</h6>
<p>源主机在开始传输数据之前，首先了解目的主机的可用缓冲区大小，预约一 定大小的缓冲区，根据分配的缓冲区大小控制数据的发送量。当缓冲区用完后， 等待对方重新分配缓冲区</p>
<h6 id="数据单元丢弃法">数据单元丢弃法</h6>
<p>当目的主机有缓冲区时就接收数据单元，无缓冲区时就将数据单元丢弃，被 丢弃的数据单元由于源主机得不到确认而重发</p>
<h6 id="许可证法">许可证法</h6>
<p>这是一种全网流量控制策略。其基本方法为：网络初启时，给每个节点各分 配一定数量的许可证；一个节点上的主机要发送数据，必须从该节点获得一个许 可证，将许可证与数据一起发送，这时发送节点将减少一个许可证，没有许可证 可用的节点不能发送数据；目标节点收到一个数据的同时，也收到一个许可证， 供自己的主机发送数据使用。为了防止某一个节点积累的数据太多，超过限量 时，将把多余的许可证单独发送或让数据单元捎带到别的节点上。</p>
<h3 id="isoosi参看模型结构">ISO/OSI参看模型结构</h3>
<p>网络发展的早期，各个计算机网络厂家都分别有自己的网络体系结构，如 ＩＢＭ 的ＳＮＡ网络体系，ＤＥＣ的ＤＮＡ网络体系和ＵＮＩＶＡＣ的ＤＣＡ分布式网络体系 等。不同的网络体系结构分别有自己的层次结构和协议，给网络标准化和互连造成很大困难。为此，ＩＳＯ（ＩｎｔｅｒｎａｔｉｏｎａｌＳｔａｎｄａｒｄｓＯｒｇａｎｉｚａｔｉｏｎ，国际标准化组织）于 １９７８年２月开始研究解决这个问题的方法草案，于１９８２年４月形成一个开放系 统互连参考模型（ＯｐｅｎＳｙｓｔｅｍＩｎｔｅｒｃｏｎｎｅｃｔｉｏｎ／ＲｅｆｅｒｅｎｃｅＭｏｄｅｌ，ＯＳＩ／ＲＭ）的国际标 准草案。ＯＳＩ／ＲＭ 是一个七层模型，如下图所示。</p>
<div align=center><img src='/pic/system/sys-50.png'/></div>
<center>开放系统互连参考模型</center>
<p>在ＯＳＩ参考模型中，每一层的功能都在下一层的支持下实现，并支持上一 层。ＯＳＩ／ＲＭ 中的低三层通常归入通信子网的功能范畴，通常靠硬件做成通信卡 或由通信处理机实现；网络中的高四层归入资源子网的功能范畴，通常用软件方 法实现，形成网络操作系统（最高层常由应用软件实现）。如果按相互通信的对 象进行划分，可将 ＯＳＩ参考模型的通信分为计算机系统间的通信和计算机系统 中进程间的通信。由会话层、表示层、应用层构成的上三层为进程间的通信，主 要解决两台通信的主机间信息传输问题；由物理层、数据链路层、网络层构成的 下三层为系统间的通信，主要解决通信子网中的数据传输问题；传输层处于两部 分的中间，可以看作系统通信与进程通信间的接口层。 应当注意，ＯＳＩ模型仅仅是“参考模型”，而不是网络体系结构的全部；它仅 仅描述了每一层的功能，而没有描述每一层使用哪些协议和承担哪些服务。现 在，ＩＳＯ已经为各层制定了标准，不过这些标准并不是 ＯＳＩ模型的一部分，而是 独立存在的。这一节在介绍各层功能的同时，虽然也顺便介绍一些有关协议，但 读者一定不要认为它们也是ＯＳＩ模型的一部分。</p>
<h4 id="osi的底层">OSI的底层</h4>
<p>ＯＳＩ的低层包括物理层、数据链路层和网络层。这一部分的功能主要是实 现通信功能，也称为通信子网部分。</p>
<h5 id="物理层">物理层</h5>
<p>ＩＳＯ给出的物理层（ＰｈｙｓｉｃａｌＬａｙｅｒ）定义为：“物理层为启动、维护和释放数据 链路实体之间二进制位传输而进行的物理连接提供机械的、电气的、功能的和规 程的特性。这种物理连接可以通过中间系统在物理层内进行二进制位传输。它 允许进行全双工或半双工的二进制位传输，对物理数据单元（即二进制位）可以 以同步方式或异步方式进行传输。” 从这段定义可以看出，物理层的功能是解决“物理连接”的标准问题，它包含 了如下几个方面的含义。</p>
<ol>
<li>它建立在传输介质之上，并不考虑传输介质的具体敷设问题，而只关心 介质两端的连接，或者说它只关心链路两端点的物理特性。这些物理特性包括：</li>
</ol>
<ul>
<li>机械特性———插头尺寸、各脚位置</li>
<li>电气特性———表示“１”和“０”的电压各为多少，一个比特的宽度</li>
<li>功能特性———某一根线上出现某一电平所代表的意义</li>
<li>规程特性———不同功能的各种可能事件出现的顺序。</li>
</ul>
<ol start="2">
<li>建立物理层的目的是提供一条物理链路上“１”、“０”码传输的物理条件 ———为数据链路层提供这个服务。</li>
<li>同时还要涉及下列问题：</li>
</ol>
<ul>
<li>数据传输的单位———串行（１ｂｉｔ），并行（ｎｂｉｔ）</li>
<li>数据传输方式———全双工或半双工以及同步方式（这些概念见第２章）</li>
<li>服务质量参数———出错率、服务可用性、传输速率和延迟； 物理层本身的管理问题，等等。</li>
</ul>
<p>常用的物理层协议有 ＥＩＡ－２３２－Ｄ、Ｖ．３５和 Ｘ．２１等。例如，在使用电缆进 行设备连接时，都要使用连接头，即插头和插座，有名的 ＥＩＡ－２３２－Ｄ（前身是 ＲＳ－２３２Ｃ）就是关于接口的协议之一。它按照ＩＳＯ２１１０标准定义的 ＤＢ－２５接 插件，规定了如图４．６所示的外形尺寸———机械特性，还规定 ＤＢ－２５的阳件（带 插针的件）安装在 ＤＴＥ（ＤａｔａＴｅｒｍｉｎａｌＥｑｕｉｐｍｅｎｔ，数据终端设备）方，阴件（带插孔 的件）安装在 ＤＣＥ（ＤａｔａＣｏｍｍｕｎｉｃａｔｉｏｎＥｑｕｉｐｍｅｎｔ，数据通信设备）方。</p>
<div align=center><img src='/pic/system/sys-51.png'/></div>
<center>DB-25外形尺寸</center>
<br/>
<p>为了保证正确地传输二进制数据并使设备控制能有效地进行，ＥＩＡ－２３２－Ｄ 提供了数据信号和控制信号的电压标准———电气特性，具体分配如下图所示：</p>
<div align=center><img src='/pic/system/sys-52.png'/></div>
<center>ETA-232-D的电气特性</center>
<p>EIA-232-D标准还描述了引脚的功能分配——功能特性，如下表所示：</p>
<div align=center><img src='/pic/system/sys-53.png'/></div>
<div align=center><img src='/pic/system/sys-54.png'/></div>
<center>ETA-232-D的接口引脚功能</center>
<p>V.35和X.21则是由国际电报电话咨询委员会 ITU-T 提出的两种物理层协议，前者主要用于模拟传输，后者用于数字传输。 物理层的功能实现后，表示两点之间的链路已连接好，就可以传输０、１码了。</p>
<h5 id="数据链路层">数据链路层</h5>
<p>在物理层实现了透明的0、1码传输的基础上，数据链路层将加强这些原始比特的传输，使之成为一条无错的数据传输链路。 <br/></p>
<p>为了达到“无错的数据传输链路”的目标，对链路层的设计通常要解决如下３方面的问题：</p>
<ol>
<li>成帧：帧就是一段或一组位串。从发送方来讲，网络层的数据是以分组的形式传输的。这些分组传输到数据链路层后，首先要解决这些分组的同步传输问题，于是要加上一个头尾标志，经过这样包装的分组就称为帧。或者说，帧解决了同步传输问题。也可以说，同步传输问题是在数据链路层解决的。帧送到物理层后，是以位串形式传输的。对于接收端来说，数据链路层从物理层接收到的是一串０、１码，到了数据链路层后，要首先根据帧头和帧尾判定出帧中的数据部分（要传向网络层的分组）。下图所示为一般帧的格式</li>
</ol>
<div align=center><img src='/pic/system/sys-55.png'/></div>
<center>一般帧格式</center>
<ol start="2">
<li>确定帧的顺序，以便数据拼接</li>
<li>差错校验———根据校验序列对帧进行校验</li>
<li>流量控制和差错控制（如停等协议、滑动窗口协议）</li>
<li>数据链路管理（链路的建立、维护和拆除）</li>
</ol>
<p>目前，典型的数据链路层协议有：面向字符的协议（如ＩＳＯ－１７４５基本型控 制规程、ＩＢＭ 的二进制同步通信协议ＢＳＣ等）和面向位的协议（如ＩＢＭ 研制的同 步数据链路控制协议ＳＤＬＣ，以及ＳＤＬＣ的修改版本———ＩＳＯ的高级数据链路控 制协议 ＨＤＬＣ、ＩＴＵ－Ｔ的链路访问协议ＬＡＰ等）。</p>
<h5 id="网络层">网络层</h5>
<p>数据链路层从一条传输链路的角度来解决传输中的可靠性问题。网络层则 是从整个网络的角度来处理数据传输中的有关问题，处理问题过程中需要考虑 通信双方的终端节点及中间节点间的关系，具体内容包括：</p>
<ol>
<li>路由选择。如何在组成网络的各子网之间找到到达传送目的地的最佳路径。</li>
<li>流量和拥塞控制。防止在子网中间出现过多的分组，造成通路阻塞，形 成瓶颈。</li>
<li>差错及故障的恢复。网络层中有代表性的标准协议有：ITU-TX的 X.25、Internet 中使用的 IP 协议等。</li>
</ol>
<h4 id="osi的高层">OSI的高层</h4>
<p>OSI 的高层包括会话层、表示层和应用层，属于资源的分配和处理的部分，通常称为资源子网部分。</p>
<h5 id="会话层">会话层</h5>
<p>会话层是建立在用户与网络间的接口，好像两台主机间的联络官，主要处理通信双方交互的建立、组织，并协调、控制会话过程的进行（会话服务）</p>
<h5 id="表示层">表示层</h5>
<p>表示层处理两个应用实体间数据交换的语法问题，解决数据交换中存在的数据格式不一致和数据表示方法不同等问题。例如 IBM 系统采用 EBCD 编码，而其他一些系统用户采用 ASCII 编码，表示层要为它们的转换服务，转换后传输给会话层。此外，表示层还进行加密、压缩或终端仿真处理。下图形象地描述了表示层的功能。</p>
<div align=center><img src='/pic/system/sys-56.png'/></div>
<center>表示层的功能</center>
<h5 id="应用层">应用层</h5>
<p>应用层主要进行应用管理和系统管理，直接为用户服务，在信息网络用户之间形成一个交换信息的界面 KK 用户应用程序。简单地说，就是接收用户数据。信息网络系统接受了用户的数据后，立即把它们传输给表示层。</p>
<h3 id="传输层">传输层</h3>
<h4 id="传输层的功能">传输层的功能</h4>
<p>传输层是站在比网络层更高的角度来研究问题。如下图所示，网络层考虑的是网络的细节，而传输层屏蔽了这些细节，只从主机间逻辑连接（或进程间通信）的角度来处理数据的传输问题。</p>
<div align=center><img src='/pic/system/sys-57.png'/></div>
<center>网络层与传输层的研究角度</center>
<p>传输层与数据链路层不同，数据链路层处理的是相同网络中两个节点间的 数据通信；而传输层处理的是主机间的数据通信，是源节点到目的节点之间的传 输，它考虑的具体内容有：</p>
<ol>
<li>两个主机间数据传输的方式。虚电路方式，与连接有关的数据传输服 务，像打电话；数据报方式，与连接无关的数据传输服务，像邮局传输信件。</li>
<li>把数据分割成数据包，分组，为会话层提供最佳的数据传输服务，以便 充分地利用网络。</li>
</ol>
<p>传输层是计算机网络中非常关键的一层。可以说，当在传输层中解决了两 台主机间的通信问题后，在其上就可以进一步解决通信双方的交互问题、数据的 表示问题和具体应用了。</p>
<h4 id="传输模型">传输模型</h4>
<p>传输层是整个协议层次结构的中心，它下靠传输服务提供者———通信子网的支持，上为传输服务用户———上面的３层提供从源端机到目的端机的可靠的、价格合理的数据传输服务。下图是传输层的一个抽象模型。其中，TSAP（Transport Service Access Pointer）为传输层服务访问点，NSPA（Network Service Access Pointer）为网络层服务访问点，传输实体（Transport Entity）为完成传输层任务的硬件和软件，TPDU（Transport Protocol Data Unit）是传输协议数据单元。</p>
<div align=center><img src='/pic/system/sys-58.png'/></div>
<center>传输层抽象模型</center>
<h4 id="传输层的基本开发思想">传输层的基本开发思想</h4>
<p>传输层 建立 在 网络 层之 上。在通 信子 网范 畴中，连接 通常 叫做 虚电 路 （ＶｉｒｔｕａｌＣｉｒｃｕｉｔ），无连接的独立报文通常叫做数据报。网络层建立在数据链路层 的基础上，向传输层提供两种服务：面向连接的服务和无连接的服务。通常把面 向连接的服务也叫做虚电路服务，把无连接的服务叫做数据报服务。由于网络 层是通信子网的边沿，采用哪一种服务方式，实际上就是将报文的差错和顺序控 制等复杂的功能放在通信子网中，还是放在主机（传输层）中。这代表了两种建 网的思想。Ｉｎｔｅｒｎｅｔ是采用无连接服务的代表者，这类网络开发者的基本思想 是：由于计算机处理设备已经非常便宜，把复杂性放在主机中是非常合算的；而 且，对于数据准确性要求很高的用户，对子网的可靠性总是留有戒心，为了保护自己，总要在传输层设置差错和报文顺序的控制功能，再在子网中设置这些功能 就没有多大意义了。ＡＴＭ 则是采用面向连接服务的代表者，这类网络开发者的 基本思想是：通信子网是一项重要的公共基础设施，应当能为多种需求服务，其 中包括对子网质量要求高的用户（如银行系统）的服务，这对子网的可靠性提出 了较高的要求；另一方面，这样重要的基础设施不能朝建夕改，应当有一定的超 前性和稳定性。这两种思路，孰优孰劣，极难定断，它们各自都在向前发展。
<br/></p>
<p>传输层与网络层一样，也有两种服务：面向连接的服务和无连接的服务。这 两种服务与网络层是一致的，因为传输层是对网络层在可靠性方面最后的补充。 也就是说，在传输层之上不再考虑传输的可靠性问题。为了让用户更放心，为了 给应用于各种网络的应用程序提供更可靠的网络服务，使这些应用程序能够采 用一个标准的原语集来编写，而不必担心不同的通信子网接口和不可靠的数据 传输，才设置了传输层。</p>
<h4 id="传输层协议类型与网络层服务质量的关系">传输层协议类型与网络层服务质量的关系</h4>
<p>传输层的主要功能是增强和优化网络层提供的服务质量。因此，传输层的 工作情形依赖于网络层提供的服务质量。网络层提供的服务愈完善，传输层协 议就愈简单；反之，网络层提供的服务愈简单，传输层协议就愈复杂。
<br/></p>
<p>按照质量，可以把网络层的服务分为 Ａ，Ｂ，Ｃ三级：Ａ 级网络提供完善的服 务，分组的丢失、重复和错序极少。Ｃ级网络提供的服务几乎是不可靠的，它会 出现分组丢失和重复分组。Ｂ级网络服务介于 Ａ 级和 Ｃ级之间。基于 Ａ级网 络服务的传输层协议非常简单，基于 Ｃ级网络服务的传输层协议非常复杂。广 域网几乎不能提供Ａ级服务，面向连接的广域网常提供Ｂ级服务，面向无连接 的广域网则提供Ｃ级服务；少数局域网可以提供 Ａ级服务。根据网络层提供的 服务，ＩＳＯ／ＯＳＩ把传输层协议分为０～４等５类，如表所示：</p>
<div align=center><img src='/pic/system/sys-59.png'/></div>
<center>网络层的服务等级与传输层协议类型</center>
<h4 id="传输服务过程">传输服务过程</h4>
<p>传输层向传输服务用户提供面向连接的服务和无连接的服务，并且服务是通过建立的两个传输实体之间所用的传输协议实现的。下面通过介绍面向连接 的传输服务过程，使读者了解传输协议的基本要素。</p>
<h5 id="建立连接">建立连接</h5>
<p>面向连接的服务是从使用服务原语建立连接开始的。然而，一个应用程序 要与一个远程应用程序建立连接，首先必须明确是与哪个远方应用程序建立连 接，也就是要确定一对传输地址ＴＳＡＰ。每一个传输地址都与一定的功能相联 系。一般说来，本地传输地址不难确定，可以依据传输服务用户（进程）所依附的 ＴＳＡＰ确定。而远端的ＴＳＡＰ确定不这么简单。
<br/>
传输地址ＴＳＡＰ有点像电话的号码，每个电话号码是与特定的用户或用途 相联系的。但是，有的人有电话，还可能有几部电话；而有的人没有固定电话可 用，别人要找他，就得借助一些固定电话。传输地址也有这样的情况，有的ＴＳＡＰ 是约定俗成具有不变功能的，有的则是临时分配的，传输服务用户无法直接知 道。</p>
<h6 id="与远端固定传输地址的连接">与远端固定传输地址的连接</h6>
<p>端－端通信向上提供的服务最终表现为面向应用程序的服务。应用程序间 的通信具体由多个进程实现，在多用户、多任务的网络中要求一台主机能并发地 处理多个进程。为此，传输层顶端提供了多个“端口”（传输地址）的服务，一个端 口对应一个进程，以满足一台主机同时并发地处理多个进程的要求。
<br/></p>
<p>首先讨论与远端固定传输地址连接的情形。设源端机上一个依附于８号 ＴＳＡＰ的进程需要远 端的一个 时间进 程的 服务；远 端时间 进程 依附于 １２３号 ＴＳＡＰ，并处于休眠状态。连接过程如下：</p>
<ol>
<li>源主机上的进程需要查询时间时，发出连接请求———源传输地址为８号 ＴＳＡＰ，目标地址为１２３号ＴＳＡＰ。</li>
<li>源主机传输层收到连接请求后，在源主机和目标主机上选择ＮＳＡＰ，并在 它们之间建立一个网络连接。</li>
<li>源主机上的传输实体利用上述连接，将服务质量参数通知目的主机上的 传输实体</li>
<li>目的主机上的传输实体发送连接指示给时间进程</li>
<li>如果时间进程同意，就发出连接响应原语</li>
<li>源主机的传输实体收到确认信号，连接便建立</li>
</ol>
<h6 id="与非固定传输地址的连接">与非固定传输地址的连接</h6>
<p>一个人要是没有固定电话，而别人要与他通信，就得借助某个固定电话（如 秘书的电话）。具体的实现可能有多种方式。例如，请求通话者先打一个电话到 某固定电话（秘书处），让该固定电话通知他，如果他愿意与请求者通话，（秘书）就为他选定一台电话并把这台电话的号码通知请求者，再由请求者打过来。
<br/></p>
<p>通过公用传输地址ＴＳＡＰ与非固定传输地址进行连接，也有许多方法。其 中一种方法是：主机为远程进程的使用提供注册程序或进程连接服务程序（相当 于秘书）；该程序可常驻内存并附在固定ＴＳＡＰ地址上（这个地址可以在网络使 用手册中找到）。任何进程要访问远程服务，步骤如下：</p>
<ol>
<li>首先与注册进程连接（在 ＡＲＰＡ网中称为初始连接）———相当于先接通秘书的电话</li>
<li>请求进程给注册进程发消息，说明要服务的程序———相当于告诉对方秘 书要找谁。</li>
<li>注册进程按照消息要求产生一个新的进程运行该服务进程，并为它分配 一个未用的传输地址———相当于分配一部临时可用电话。</li>
<li>注册进程将分配的传输地址发给远端请求进程，并释放与请求进程的传 输连接，然后进入休眠状态———相当于把临时分配的电话号码告知来电者，然后挂机</li>
<li>请求进程收到传输地址后，释放与注册进程的连接———相当于也挂机</li>
<li>请求进程与服务进程连接———相当于再拨给欲联系者的临时电话</li>
</ol>
<h6 id="tsap地址和nsap地址的结构">TSAP地址和NSAP地址的结构</h6>
<p>一般，通用 TSAP 地址具有下面的层次结构</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&lt;国家&gt; &lt;部门&gt; &lt;网络&gt; &lt;主机&gt; &lt;端口&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>实际上，也就是：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">TSAP地址 =NSAP地址 + &lt;端口&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>因此，当一个传输实体收到一个ＴＳＡＰ地址并想与之连接时，只要使用ＴＳＡＰ 地址中的ＮＳＡＰ地址，就可以首先建立一个网络连接，进而到达适当的远端传输 实体。也就是说，网络连接是传输连接的一部分，传输连接是基于网络连接的。</p>
<h5 id="数据传输">数据传输</h5>
<p>两个要通信的传输服务用户进程一旦建立了连接，便可以立即开始数据传 输。传输层要向传输用户提供可靠的、透明的和价格合理的数据传输。下面介 绍传输实体在数据传输过程中要处理的一些问题。</p>
<h6 id="数据等装">数据等装</h6>
<p>在源端，传输层接收来自高层的服务数据单元ＴＳＤＵ，然后加上报头进行封 装，使之成为传输层的协议数据单元 ＴＰＤＵ。这时，如果报文太长，则应将其分 段；如果报文太短，应将它们组装。与之对应，在目的端再恢复原状。</p>
<h6 id="拼接和分割">拼接和分割</h6>
<p>从传输层往下看，ＴＰＤＵ 实际上是要通过网络层进行实际的数据传输。为此，要按网络层的 ＮＰＤＵ大小，对传输层的ＴＰＤＵ进行拼接或分割。
<br/></p>
<p>随着分组一层一层地向下层传输，数据分组被进行一层一层的封装，最后到 达物理层按比特流传输。下图表明了这一层层封装的过程。</p>
<div align=center><img src='/pic/system/sys-60.png'/></div>
<center>TPDU的层层封装过程</center>
<h6 id="多路复用和分流">多路复用和分流</h6>
<p>传输连接是建立在网络连接基础上的，网络连接是建立在虚电路概念上的。 多路复用是指当传输服务进程产生的数据流较少时，可以将几条传输数据流映 射到同一物理连接（即一条虚电路）上，以充分利用网络带宽，减少网络连接，降 低费用。分流是指当用户进程发送的数据量大于网络连接的容量时，该传输连 接可以打开多个网络连接（即多条虚电路）来提高带宽。</p>
<h6 id="流量控制和缓冲管理">流量控制和缓冲管理</h6>
<p>流量控制就是控制发送数据量，使其不超过接收者的能力。这一点与数据 链路层的流量控制概念相同，并且它们都是基于滑动窗口技术的。但是，数据链 路层线路较少，通信量大，常采用固定大小的窗口；传输层则由于所需的连接个 数远比数据链路层要多，但同时建立连接的可能性又比较小，为了提高缓冲区的 利用率，常采用可变大小的窗口以及动态缓冲分配技术。</p>
<h5 id="释放连接">释放连接</h5>
<p>当数据传输完毕或出现异常情况时，都需要释放连接。</p>
<h4 id="传输服务原语">传输服务原语</h4>
<h5 id="传输服务原语的参数">传输服务原语的参数</h5>
<p>在传输服务原语中，要涉及如下参数：</p>
<ul>
<li>callee，被呼方传输实体使用的地址（即被呼方TSAP的地址）</li>
<li>caller，呼叫方传输实体使用的地址（即呼叫方TSAP的地址）</li>
<li>exp_wanted，是否加快数据发送（布尔值）</li>
<li>qos，希望的服务质量</li>
<li>user_data，传输服务用户数据</li>
<li>responder，目标方作为响应的传输地址</li>
<li>reason，连接释放原因</li>
</ul>
<h5 id="传输服务原语的类型">传输服务原语的类型</h5>
<p>每种传输服务各有自己的访问原语。ISO/OSI 服务原语是提供给面向连接的和无连接的服务使用的。传输服务原语也分这样两大类：面向连接的传输服务原语和无连接的传输服务原语。</p>
<h5 id="面向连接的传输服务原语">面向连接的传输服务原语</h5>
<h6 id="连接服务原语">连接服务原语</h6>
<ul>
<li>T_CONNECT.request(callee, caller, exp_wanted, qos, user_data);</li>
<li>T_CONNECT.indication(callee, caller, exp_wanted, qos, user_data);</li>
<li>T_CONNECT.response(qos, responder, exp_wanted, user_data);</li>
<li>T_CONNECT.confirm(qos, responder, exp_wanted, user_data);</li>
</ul>
<h6 id="连接释放服务原语">连接释放服务原语</h6>
<ul>
<li>T_DISCONNECT.request(user_data);</li>
<li>T_DISCONNECT.indication(responder, user_data);</li>
</ul>
<h6 id="数据正常拴束服务原语">数据正常拴束服务原语</h6>
<ul>
<li>T_DATA.request(user_data);</li>
<li>T_DATA.indication(user_data);</li>
</ul>
<h6 id="数据加速传输服务原语">数据加速传输服务原语</h6>
<ul>
<li>T_EXPEDITED_DATA.request(user_data);</li>
<li>T_EXPEDITED_DATA.indication(user_data);</li>
</ul>
<h5 id="无连接的传输服务原语">无连接的传输服务原语</h5>
<ul>
<li>T_UNIDATA.request(callee, caller, exp_wanted, qos, user_data);</li>
<li>T_UNIDATA.indication(callee, caller, exp_wanted, qos, user_data);</li>
</ul>
<h4 id="传输服务原语使用的时序">传输服务原语使用的时序</h4>
<p>下图表示了几种典型传输服务过程的原语时序关系。图中，两条竖线将 空间分为３部分：中间为传输服务提供者，两侧为进行通信的两个传输服务用户。</p>
<div align=center><img src='/pic/system/sys-61.png'/></div>
<center>几种典型传输服务过程的原语时序关系</center>
<h3 id="osirm各层中的数据流动">OSI/RM各层中的数据流动</h3>
<p>从OSI/RM 中还可以看出，在每一层中数据的格式是不相同的。下图描绘了从用户应用程序进程将数据送入应用层开始，直到在物理层中按比特流进 行实际传送，数据在各层中被所在层的协议加工、流动的过程。 下面进一步加以说明。假定要将数据 Ｍ 从用户应用进程ＰＡ 传向用户应用进程ＰＢ。其过程如下：</p>
<div align=center><img src='/pic/system/sys-62.png'/></div>
<center>OSI/RM中的数据流动示意图</center>
<p>在发送端进程$P_{A}$ 首先要将数据 $AP$ 送到应用层；<br/>
在应用层，加上一些控制信息组成的报头 $H_{7}$，形成第７层的报文———协议数据单元$PDU_{7}$，再将$PDU_{7}$ 传到表示层；<br/>
在表示层，加上第６层协议要求的控制信息组成的报头$H_{6}$，形成第６层 的协议数据单元$PDU_{6}$，再将$PDU_{6}$ 传到会话层；<br/>
在会话层，加上第５层协议要求的控制信息$H_{5}$，形成第５层的协议数据单元$PDU_{5}$，传到传输层；<br/>
在传输层，如果报文太长，应将其分为若干分组，即$P_{1}$，$P_{2}$，&hellip;，$P_{n}$，再分别为它们加上第４层的控制信息$H_{4}$，形成第４层的协议数据单元$PDU_{4}$，传到网络层；<br/>
在网络层，把第４层传来的分组及报头看成是高层数据单元，再加上第３ 层的报头 $H_{3}$，发往数据链路层；<br/>
在数据链路层，分别在头部和尾部加上报头$H_{2}$ 和报尾$T_{2}$，形成第２层的 数据单元———帧，发往物理层；<br/>
在物理层，不再加控制信息，按比特流进行实际传送。
<br/></p>
<p>各层的协议控制信息 $H_{i}$，因协议不同、传送的内容不同，分别有不同的内容 和格式要求。
<br/></p>
<p>比特流到达节点B后，传送到其数据链路层，剥去报头 $H_{2}$ 和报尾$T_{2}$，形成 $PDU_{3}$，传到３层；再剥去$H_{3}$ 形成$PDU_{4}$，传到４层……；直到将数据$M$传给$P_{B}$。</p>
<h2 id="ieee-802模型与局域网">IEEE 802模型与局域网</h2>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>更新于 2022-10-02</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/system/">system</a>,&nbsp;<a href="/tags/network/">network</a>,&nbsp;<a href="/tags/%E7%BD%91%E7%BB%9C/">网络</a>,&nbsp;<a href="/tags/%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86/">网络原理</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/2022/10/0003-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/" class="prev" rel="prev" title="计算机网络组成原理"><i class="fas fa-angle-left fa-fw"></i>计算机网络组成原理</a>
            <a href="/2022/11/0012-%E9%98%B2%E6%AD%A2%E7%A8%8B%E5%BA%8F%E8%A2%ABhook%E7%9A%84%E6%96%B9%E6%B3%95/" class="next" rel="next" title="防止程序被Hook的方法">防止程序被Hook的方法<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
<div id="comments"><div id="valine" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://valine.js.org/">Valine</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2017 - 2023</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">ding jing</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="回到顶部">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="查看评论">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><link rel="stylesheet" href="/lib/valine/valine.min.css"><link rel="stylesheet" href="/lib/lightgallery/lightgallery.min.css"><link rel="stylesheet" href="/lib/katex/katex.min.css"><link rel="stylesheet" href="/lib/katex/copy-tex.min.css"><script type="text/javascript" src="/lib/valine/Valine.min.js"></script><script type="text/javascript" src="/lib/smooth-scroll/smooth-scroll.min.js"></script><script type="text/javascript" src="/lib/autocomplete/autocomplete.min.js"></script><script type="text/javascript" src="/lib/algoliasearch/algoliasearch-lite.umd.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/twemoji/twemoji.min.js"></script><script type="text/javascript" src="/lib/lightgallery/lightgallery.min.js"></script><script type="text/javascript" src="/lib/lightgallery/lg-thumbnail.min.js"></script><script type="text/javascript" src="/lib/lightgallery/lg-zoom.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="/lib/sharer/sharer.min.js"></script><script type="text/javascript" src="/lib/katex/katex.min.js"></script><script type="text/javascript" src="/lib/katex/auto-render.min.js"></script><script type="text/javascript" src="/lib/katex/copy-tex.min.js"></script><script type="text/javascript" src="/lib/katex/mhchem.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":9999999999},"comment":{"valine":{"appId":"oGOJ6TSiiaaOrhXD1bEYILk9-gzGzoHsz","appKey":"lbK71uSxpg4XmLmvm2h13JdJ","el":"#valine","emojiCDN":"https://cdn.jsdelivr.net/npm/emoji-datasource-google@5.0.1/img/google/64/","emojiMaps":{"100":"1f4af.png","alien":"1f47d.png","anger":"1f4a2.png","angry":"1f620.png","anguished":"1f627.png","astonished":"1f632.png","black_heart":"1f5a4.png","blue_heart":"1f499.png","blush":"1f60a.png","bomb":"1f4a3.png","boom":"1f4a5.png","broken_heart":"1f494.png","brown_heart":"1f90e.png","clown_face":"1f921.png","cold_face":"1f976.png","cold_sweat":"1f630.png","confounded":"1f616.png","confused":"1f615.png","cry":"1f622.png","crying_cat_face":"1f63f.png","cupid":"1f498.png","dash":"1f4a8.png","disappointed":"1f61e.png","disappointed_relieved":"1f625.png","dizzy":"1f4ab.png","dizzy_face":"1f635.png","drooling_face":"1f924.png","exploding_head":"1f92f.png","expressionless":"1f611.png","face_vomiting":"1f92e.png","face_with_cowboy_hat":"1f920.png","face_with_hand_over_mouth":"1f92d.png","face_with_head_bandage":"1f915.png","face_with_monocle":"1f9d0.png","face_with_raised_eyebrow":"1f928.png","face_with_rolling_eyes":"1f644.png","face_with_symbols_on_mouth":"1f92c.png","face_with_thermometer":"1f912.png","fearful":"1f628.png","flushed":"1f633.png","frowning":"1f626.png","ghost":"1f47b.png","gift_heart":"1f49d.png","green_heart":"1f49a.png","grimacing":"1f62c.png","grin":"1f601.png","grinning":"1f600.png","hankey":"1f4a9.png","hear_no_evil":"1f649.png","heart":"2764-fe0f.png","heart_decoration":"1f49f.png","heart_eyes":"1f60d.png","heart_eyes_cat":"1f63b.png","heartbeat":"1f493.png","heartpulse":"1f497.png","heavy_heart_exclamation_mark_ornament":"2763-fe0f.png","hole":"1f573-fe0f.png","hot_face":"1f975.png","hugging_face":"1f917.png","hushed":"1f62f.png","imp":"1f47f.png","innocent":"1f607.png","japanese_goblin":"1f47a.png","japanese_ogre":"1f479.png","joy":"1f602.png","joy_cat":"1f639.png","kiss":"1f48b.png","kissing":"1f617.png","kissing_cat":"1f63d.png","kissing_closed_eyes":"1f61a.png","kissing_heart":"1f618.png","kissing_smiling_eyes":"1f619.png","laughing":"1f606.png","left_speech_bubble":"1f5e8-fe0f.png","love_letter":"1f48c.png","lying_face":"1f925.png","mask":"1f637.png","money_mouth_face":"1f911.png","nauseated_face":"1f922.png","nerd_face":"1f913.png","neutral_face":"1f610.png","no_mouth":"1f636.png","open_mouth":"1f62e.png","orange_heart":"1f9e1.png","partying_face":"1f973.png","pensive":"1f614.png","persevere":"1f623.png","pleading_face":"1f97a.png","pouting_cat":"1f63e.png","purple_heart":"1f49c.png","rage":"1f621.png","relaxed":"263a-fe0f.png","relieved":"1f60c.png","revolving_hearts":"1f49e.png","right_anger_bubble":"1f5ef-fe0f.png","robot_face":"1f916.png","rolling_on_the_floor_laughing":"1f923.png","scream":"1f631.png","scream_cat":"1f640.png","see_no_evil":"1f648.png","shushing_face":"1f92b.png","skull":"1f480.png","skull_and_crossbones":"2620-fe0f.png","sleeping":"1f634.png","sleepy":"1f62a.png","slightly_frowning_face":"1f641.png","slightly_smiling_face":"1f642.png","smile":"1f604.png","smile_cat":"1f638.png","smiley":"1f603.png","smiley_cat":"1f63a.png","smiling_face_with_3_hearts":"1f970.png","smiling_imp":"1f608.png","smirk":"1f60f.png","smirk_cat":"1f63c.png","sneezing_face":"1f927.png","sob":"1f62d.png","space_invader":"1f47e.png","sparkling_heart":"1f496.png","speak_no_evil":"1f64a.png","speech_balloon":"1f4ac.png","star-struck":"1f929.png","stuck_out_tongue":"1f61b.png","stuck_out_tongue_closed_eyes":"1f61d.png","stuck_out_tongue_winking_eye":"1f61c.png","sunglasses":"1f60e.png","sweat":"1f613.png","sweat_drops":"1f4a6.png","sweat_smile":"1f605.png","thinking_face":"1f914.png","thought_balloon":"1f4ad.png","tired_face":"1f62b.png","triumph":"1f624.png","two_hearts":"1f495.png","unamused":"1f612.png","upside_down_face":"1f643.png","weary":"1f629.png","white_frowning_face":"2639-fe0f.png","white_heart":"1f90d.png","wink":"1f609.png","woozy_face":"1f974.png","worried":"1f61f.png","yawning_face":"1f971.png","yellow_heart":"1f49b.png","yum":"1f60b.png","zany_face":"1f92a.png","zipper_mouth_face":"1f910.png","zzz":"1f4a4.png"},"enableQQ":false,"highlight":true,"lang":"zh-cn","pageSize":10,"placeholder":"你的评论 ...","recordIP":true,"serverURLs":"https://ogoj6tsi.lc-cn-n1-shared.com","visitor":true}},"lightGallery":{"actualSize":false,"exThumbImage":"data-thumbnail","hideBarsDelay":2000,"selector":".lightgallery","speed":400,"thumbContHeight":80,"thumbWidth":80,"thumbnail":true},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"algoliaAppID":"PASDMWALPK","algoliaIndex":"index.zh-cn","algoliaSearchKey":"b42948e51daaa93df92381c8e2ac0f93","highlightTag":"em","maxResultLength":10,"noResultsFound":"没有找到结果","snippetLength":80,"type":"algolia"},"twemoji":true};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
